(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{12:function(e,t,a){e.exports={ImageGalleryItem:"ImageGalleryItem_ImageGalleryItem__Sxfsx",ImageGalleryItem_image:"ImageGalleryItem_ImageGalleryItem_image__3g4LV"}},13:function(e,t,a){e.exports={Overlay:"Modal_Overlay__3gB_h",Modal:"Modal_Modal__1NXmS"}},18:function(e,t,a){e.exports={Button:"Button_Button__1dLOE"}},19:function(e,t,a){e.exports={App:"App_App__1ah4O"}},48:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(4),o=a.n(c),i=a(3),l=a(8),s=(a(25),a(5)),u=a.n(s),m=a(1);function h(e){var t=e.onSubmit,a=Object(n.useState)(""),r=Object(i.a)(a,2),c=r[0],o=r[1];return Object(m.jsx)("header",{className:u.a.Searchbar,children:Object(m.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""!==c.trim()?(t(c),o("")):l.b.error("enter search word")},className:u.a.SearchForm,children:[Object(m.jsx)("button",{type:"submit",className:u.a.SearchForm_button,children:Object(m.jsx)("span",{className:u.a.SearchForm_button_label,children:"Search"})}),Object(m.jsx)("input",{className:u.a.SearchForm_input,type:"text",onChange:function(e){o(e.currentTarget.value)},value:c,autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos"})]})})}var b=a(14);function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return fetch("https://pixabay.com/api/?q=".concat(e,"&page=").concat(t,"&key=23293955-a7595990e0e78e906d7de269f&image_type=photo&orientation=horizontal&per_page=12")).then((function(e){return e.ok?e.json():Promise.reject(new Error("find nothing"))}))}var j=a(12),g=a.n(j);function p(e){var t=e.img;return Object(m.jsx)("li",{className:g.a.ImageGalleryItem,children:Object(m.jsx)("img",{bigimg:t.largeImageURL,src:t.webformatURL,alt:t.tag,className:g.a.ImageGalleryItem_image})})}var _=a(9),f=a.n(_),O=(a(27),a(15)),S=a.n(O),v=a(16),x=a(17),y=a(21),I=a(20),w=a(11),F=a(18),N=a.n(F),G=a(2),k=a.n(G),E=function(e){Object(y.a)(a,e);var t=Object(I.a)(a);function a(){var e;Object(v.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={},e.changePage=function(){e.props.onSubmit()},e}return Object(x.a)(a,[{key:"render",value:function(){return Object(m.jsx)("button",{type:"button",className:N.a.Button,onClick:this.changePage,children:"Load more"})}}]),a}(w.Component);E.propType={onSubmit:k.a.func.isRequired};var B=a.p+"static/media/Nothing.df37ddbd.jpg";function C(e){var t=e.search,a=e.onShowModal,r=e.modalImg,c=Object(n.useState)([]),o=Object(i.a)(c,2),l=o[0],s=o[1],u=Object(n.useState)(""),h=Object(i.a)(u,2),j=h[0],g=h[1],_=Object(n.useState)("idle"),O=Object(i.a)(_,2),v=O[0],x=O[1],y=Object(n.useState)(1),I=Object(i.a)(y,2),w=I[0],F=I[1];function N(e){e.target.attributes.bigimg&&(a(),r(e.target.attributes.bigimg.value))}return Object(n.useEffect)((function(){null!==t&&(x("pending"),d(t).then((function(e){return e.hits})).then((function(e){s(e),x("resolved")})).catch((function(e){g(e),x("reject")})))}),[t]),Object(n.useEffect)((function(){1!==w&&(x("pending"),d(t,w).then((function(e){return e.hits})).then((function(e){s((function(t){return[].concat(Object(b.a)(t),Object(b.a)(e))})),x("resolved"),window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})})))}),[w,t]),"idle"===v?Object(m.jsx)("img",{src:B,alt:"nothing",width:"100%"}):"pending"===v?Object(m.jsxs)("div",{children:[l&&Object(m.jsx)("ul",{onClick:N,className:f.a.ImageGallery,children:l.map((function(e){return Object(m.jsx)(p,{img:e},e.id)}))}),Object(m.jsx)(S.a,{type:"Grid",color:"#00BFFF",height:100,width:100,className:f.a.loader})]}):"rejected"===v?Object(m.jsx)("p",{children:j}):"resolved"===v?Object(m.jsxs)("div",{children:[l.length>0?Object(m.jsx)("ul",{onClick:N,className:f.a.ImageGallery,children:l.map((function(e){return Object(m.jsx)(p,{img:e},e.id)}))}):Object(m.jsx)("img",{src:B,alt:"nothing",width:"100%"}),l.length>=12&&Object(m.jsx)(E,{onSubmit:function(){F((function(e){return e+1}))}})]}):void 0}C.protoType={search:k.a.string.isRequired,onShowModal:k.a.func.isRequired,modalImg:k.a.func.isRequired};var M=a(13),R=a.n(M);function L(e){var t=e.close,a=e.children,r=document.querySelector("#nodalRoot");function o(e){"Escape"===e.code&&t()}return Object(n.useEffect)((function(){return window.addEventListener("keydown",o),function(){window.removeEventListener("keydown",o)}})),Object(c.createPortal)(Object(m.jsx)("div",{className:R.a.Overlay,onClick:function(e){e.currentTarget===e.target&&t()},children:Object(m.jsx)("div",{className:R.a.Modal,children:a})}),r)}var q=a(19),A=a.n(q);function T(){var e=Object(n.useState)(null),t=Object(i.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(!1),o=Object(i.a)(c,2),s=o[0],u=o[1],b=Object(n.useState)(null),d=Object(i.a)(b,2),j=d[0],g=d[1];function p(){u((function(e){return!e}))}return Object(m.jsxs)("div",{className:A.a.App,children:[Object(m.jsx)(h,{onSubmit:function(e){r(e)}}),Object(m.jsx)(l.a,{autoClose:5e3,position:"top-center"}),Object(m.jsx)(C,{search:a,onShowModal:p,modalImg:function(e){g(e)}}),s&&Object(m.jsx)(L,{close:p,children:Object(m.jsx)("img",{src:j,alt:""})})]})}o.a.render(Object(m.jsx)(r.a.StrictMode,{children:Object(m.jsx)(T,{})}),document.getElementById("root"))},5:function(e,t,a){e.exports={Searchbar:"Searchbar_Searchbar__2X0p8",SearchForm:"Searchbar_SearchForm__1Xe1A",SearchForm_button:"Searchbar_SearchForm_button__2o6By","SearchForm-button":"Searchbar_SearchForm-button__2YCBN",SearchForm_button_label:"Searchbar_SearchForm_button_label__k_hwn",SearchForm_input:"Searchbar_SearchForm_input__3utR8","SearchForm-input":"Searchbar_SearchForm-input__2d6gi"}},9:function(e,t,a){e.exports={ImageGallery:"ImageGallery_ImageGallery__lvQaV",loader:"ImageGallery_loader__2eJvf"}}},[[48,1,2]]]);
//# sourceMappingURL=main.e7f2cce1.chunk.js.map